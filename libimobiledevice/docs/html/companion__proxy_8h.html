<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libimobiledevice: libimobiledevice/companion_proxy.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libimobiledevice
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6f94c0669708509ba6e66291c679659c.html">libimobiledevice</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">companion_proxy.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Companion proxy support.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab98d6dc97d0be798e36a0d1bdb97c158"><td class="memItemLeft" align="right" valign="top"><a id="ab98d6dc97d0be798e36a0d1bdb97c158"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>COMPANION_PROXY_SERVICE_NAME</b>&#160;&#160;&#160;&quot;com.apple.companion_proxy&quot;</td></tr>
<tr class="separator:ab98d6dc97d0be798e36a0d1bdb97c158"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a82a8e57caa431fe1aa153e73ce885bc3"><td class="memItemLeft" align="right" valign="top"><a id="a82a8e57caa431fe1aa153e73ce885bc3"></a>
typedef struct companion_proxy_client_private&#160;</td><td class="memItemRight" valign="bottom"><b>companion_proxy_client_private</b></td></tr>
<tr class="separator:a82a8e57caa431fe1aa153e73ce885bc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43703289c896842c92f7f1c6063a4b34"><td class="memItemLeft" align="right" valign="top"><a id="a43703289c896842c92f7f1c6063a4b34"></a>
typedef companion_proxy_client_private *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a></td></tr>
<tr class="memdesc:a43703289c896842c92f7f1c6063a4b34"><td class="mdescLeft">&#160;</td><td class="mdescRight">The client handle. <br /></td></tr>
<tr class="separator:a43703289c896842c92f7f1c6063a4b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6a30405aff6f8d8c656f6d2cd6f317"><td class="memItemLeft" align="right" valign="top"><a id="a6a6a30405aff6f8d8c656f6d2cd6f317"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>companion_proxy_device_event_cb_t</b>) (plist_t event, void *userdata)</td></tr>
<tr class="separator:a6a6a30405aff6f8d8c656f6d2cd6f317"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a6fdf7d074179e00bb1321726cec6916f"><td class="memItemLeft" align="right" valign="top"><a id="a6fdf7d074179e00bb1321726cec6916f"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> { <br />
&#160;&#160;<b>COMPANION_PROXY_E_SUCCESS</b> = 0, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_INVALID_ARG</b> = -1, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_PLIST_ERROR</b> = -2, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_MUX_ERROR</b> = -3, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_SSL_ERROR</b> = -4, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_NOT_ENOUGH_DATA</b> = -5, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_TIMEOUT</b> = -6, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_OP_IN_PROGRESS</b> = -7, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_NO_DEVICES</b> = -100, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_UNSUPPORTED_KEY</b> = -101, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_TIMEOUT_REPLY</b> = -102, 
<br />
&#160;&#160;<b>COMPANION_PROXY_E_UNKNOWN_ERROR</b> = -256
<br />
 }</td></tr>
<tr class="memdesc:a6fdf7d074179e00bb1321726cec6916f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error Codes. <br /></td></tr>
<tr class="separator:a6fdf7d074179e00bb1321726cec6916f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1c3d3d20a740a8cae51e7ea960ab5e0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a1c3d3d20a740a8cae51e7ea960ab5e0e">companion_proxy_client_new</a> (<a class="el" href="libimobiledevice_8h.html#ae5bc0e9aa2f3b5023755f5e1c5039a60">idevice_t</a> device, lockdownd_service_descriptor_t service, <a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> *client)</td></tr>
<tr class="memdesc:a1c3d3d20a740a8cae51e7ea960ab5e0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the companion_proxy service on the specified device.  <a href="companion__proxy_8h.html#a1c3d3d20a740a8cae51e7ea960ab5e0e">More...</a><br /></td></tr>
<tr class="separator:a1c3d3d20a740a8cae51e7ea960ab5e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e1d3b3963e75685ccb33a9358f6f32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a72e1d3b3963e75685ccb33a9358f6f32">companion_proxy_client_start_service</a> (<a class="el" href="libimobiledevice_8h.html#ae5bc0e9aa2f3b5023755f5e1c5039a60">idevice_t</a> device, <a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> *client, const char *label)</td></tr>
<tr class="memdesc:a72e1d3b3963e75685ccb33a9358f6f32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a new companion_proxy service on the specified device and connects to it.  <a href="companion__proxy_8h.html#a72e1d3b3963e75685ccb33a9358f6f32">More...</a><br /></td></tr>
<tr class="separator:a72e1d3b3963e75685ccb33a9358f6f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257f9e359541049b6e43da98070f072e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a257f9e359541049b6e43da98070f072e">companion_proxy_client_free</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client)</td></tr>
<tr class="memdesc:a257f9e359541049b6e43da98070f072e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects a companion_proxy client from the device and frees up the companion_proxy client data.  <a href="companion__proxy_8h.html#a257f9e359541049b6e43da98070f072e">More...</a><br /></td></tr>
<tr class="separator:a257f9e359541049b6e43da98070f072e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b334622ea8def49b37afb6c7bf15e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a32b334622ea8def49b37afb6c7bf15e4">companion_proxy_send</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, plist_t plist)</td></tr>
<tr class="memdesc:a32b334622ea8def49b37afb6c7bf15e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a plist to the service.  <a href="companion__proxy_8h.html#a32b334622ea8def49b37afb6c7bf15e4">More...</a><br /></td></tr>
<tr class="separator:a32b334622ea8def49b37afb6c7bf15e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced03348cbaa6f4a0add9fa5070a906b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#aced03348cbaa6f4a0add9fa5070a906b">companion_proxy_receive</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, plist_t *plist)</td></tr>
<tr class="memdesc:aced03348cbaa6f4a0add9fa5070a906b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a plist from the service.  <a href="companion__proxy_8h.html#aced03348cbaa6f4a0add9fa5070a906b">More...</a><br /></td></tr>
<tr class="separator:aced03348cbaa6f4a0add9fa5070a906b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a802dc52deba498ebe77fbc7817a59993"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a802dc52deba498ebe77fbc7817a59993">companion_proxy_get_device_registry</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, plist_t *paired_devices)</td></tr>
<tr class="memdesc:a802dc52deba498ebe77fbc7817a59993"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a list of paired devices.  <a href="companion__proxy_8h.html#a802dc52deba498ebe77fbc7817a59993">More...</a><br /></td></tr>
<tr class="separator:a802dc52deba498ebe77fbc7817a59993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad6f197ad101505901227e03e838aff0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#aad6f197ad101505901227e03e838aff0">companion_proxy_start_listening_for_devices</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, companion_proxy_device_event_cb_t callback, void *userdata)</td></tr>
<tr class="memdesc:aad6f197ad101505901227e03e838aff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts listening for paired devices.  <a href="companion__proxy_8h.html#aad6f197ad101505901227e03e838aff0">More...</a><br /></td></tr>
<tr class="separator:aad6f197ad101505901227e03e838aff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b62ef633b5ca44a7d59d343c90f1cd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a4b62ef633b5ca44a7d59d343c90f1cd0">companion_proxy_stop_listening_for_devices</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client)</td></tr>
<tr class="memdesc:a4b62ef633b5ca44a7d59d343c90f1cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops listening for paired devices.  <a href="companion__proxy_8h.html#a4b62ef633b5ca44a7d59d343c90f1cd0">More...</a><br /></td></tr>
<tr class="separator:a4b62ef633b5ca44a7d59d343c90f1cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721a205e2561e83b5862f0437b81fd4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a721a205e2561e83b5862f0437b81fd4f">companion_proxy_get_value_from_registry</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, const char *companion_udid, const char *key, plist_t *value)</td></tr>
<tr class="memdesc:a721a205e2561e83b5862f0437b81fd4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a value for the given key.  <a href="companion__proxy_8h.html#a721a205e2561e83b5862f0437b81fd4f">More...</a><br /></td></tr>
<tr class="separator:a721a205e2561e83b5862f0437b81fd4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e2f13212969bbd6629f02eec25b9fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a23e2f13212969bbd6629f02eec25b9fe">companion_proxy_start_forwarding_service_port</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, uint16_t remote_port, const char *service_name, uint16_t *forward_port, plist_t options)</td></tr>
<tr class="memdesc:a23e2f13212969bbd6629f02eec25b9fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start forwarding a service port on the companion device to a port on the idevice.  <a href="companion__proxy_8h.html#a23e2f13212969bbd6629f02eec25b9fe">More...</a><br /></td></tr>
<tr class="separator:a23e2f13212969bbd6629f02eec25b9fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f050e48680635b8c0e7709a7af74189"><td class="memItemLeft" align="right" valign="top"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="companion__proxy_8h.html#a7f050e48680635b8c0e7709a7af74189">companion_proxy_stop_forwarding_service_port</a> (<a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> client, uint16_t remote_port)</td></tr>
<tr class="memdesc:a7f050e48680635b8c0e7709a7af74189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop forwarding a service port between companion device and idevice.  <a href="companion__proxy_8h.html#a7f050e48680635b8c0e7709a7af74189">More...</a><br /></td></tr>
<tr class="separator:a7f050e48680635b8c0e7709a7af74189"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Companion proxy support. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a257f9e359541049b6e43da98070f072e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a257f9e359541049b6e43da98070f072e">&#9670;&nbsp;</a></span>companion_proxy_client_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_client_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnects a companion_proxy client from the device and frees up the companion_proxy client data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client to disconnect and free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, COMPANION_PROXY_E_INVALID_ARG when client is NULL, or an COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="a1c3d3d20a740a8cae51e7ea960ab5e0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c3d3d20a740a8cae51e7ea960ab5e0e">&#9670;&nbsp;</a></span>companion_proxy_client_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_client_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libimobiledevice_8h.html#ae5bc0e9aa2f3b5023755f5e1c5039a60">idevice_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lockdownd_service_descriptor_t&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> *&#160;</td>
          <td class="paramname"><em>client</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connects to the companion_proxy service on the specified device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The device to connect to. </td></tr>
    <tr><td class="paramname">service</td><td>The service descriptor returned by lockdownd_start_service. </td></tr>
    <tr><td class="paramname">client</td><td>Pointer that will point to a newly allocated companion_proxy_client_t upon successful return. Must be freed using <a class="el" href="companion__proxy_8h.html#a257f9e359541049b6e43da98070f072e" title="Disconnects a companion_proxy client from the device and frees up the companion_proxy client data.">companion_proxy_client_free()</a> after use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, COMPANION_PROXY_E_INVALID_ARG when the arguments are invalid, or an COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="a72e1d3b3963e75685ccb33a9358f6f32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e1d3b3963e75685ccb33a9358f6f32">&#9670;&nbsp;</a></span>companion_proxy_client_start_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_client_start_service </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libimobiledevice_8h.html#ae5bc0e9aa2f3b5023755f5e1c5039a60">idevice_t</a>&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a new companion_proxy service on the specified device and connects to it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The device to connect to. </td></tr>
    <tr><td class="paramname">client</td><td>Pointer that will point to a newly allocated companion_proxy_client_t upon successful return. Must be freed using <a class="el" href="companion__proxy_8h.html#a257f9e359541049b6e43da98070f072e" title="Disconnects a companion_proxy client from the device and frees up the companion_proxy client data.">companion_proxy_client_free()</a> after use. </td></tr>
    <tr><td class="paramname">label</td><td>The label to use for communication. Usually the program name. Pass NULL to disable sending the label in requests to lockdownd.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, or an COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="a802dc52deba498ebe77fbc7817a59993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802dc52deba498ebe77fbc7817a59993">&#9670;&nbsp;</a></span>companion_proxy_get_device_registry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_get_device_registry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">plist_t *&#160;</td>
          <td class="paramname"><em>paired_devices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a list of paired devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">devices</td><td>Point that will receive a PLIST_ARRAY with paired device UDIDs</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The device closes the connection after sending the reply.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, COMPANION_PROXY_E_NO_DEVICES if no devices are paired, or a COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="a721a205e2561e83b5862f0437b81fd4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a721a205e2561e83b5862f0437b81fd4f">&#9670;&nbsp;</a></span>companion_proxy_get_value_from_registry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_get_value_from_registry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>companion_udid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">plist_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a value for the given key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">companion_udid</td><td>UDID of the (paired) companion device </td></tr>
    <tr><td class="paramname">key</td><td>The key to retrieve the value for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The device closes the connection after sending the reply.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, COMPANION_PROXY_E_INVALID_ARG when client or paired_devices is invalid, COMPANION_PROXY_E_UNSUPPORTED_KEY if the companion device doesn't support the given key, or a COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="aced03348cbaa6f4a0add9fa5070a906b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced03348cbaa6f4a0add9fa5070a906b">&#9670;&nbsp;</a></span>companion_proxy_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">plist_t *&#160;</td>
          <td class="paramname"><em>plist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives a plist from the service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">plist</td><td>The plist to store the received data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, COMPANION_PROXY_E_INVALID_ARG when client or plist is NULL </dd></dl>

</div>
</div>
<a id="a32b334622ea8def49b37afb6c7bf15e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32b334622ea8def49b37afb6c7bf15e4">&#9670;&nbsp;</a></span>companion_proxy_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">plist_t&#160;</td>
          <td class="paramname"><em>plist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a plist to the service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">plist</td><td>The plist to send</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, COMPANION_PROXY_E_INVALID_ARG when client or plist is NULL </dd></dl>

</div>
</div>
<a id="a23e2f13212969bbd6629f02eec25b9fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e2f13212969bbd6629f02eec25b9fe">&#9670;&nbsp;</a></span>companion_proxy_start_forwarding_service_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_start_forwarding_service_port </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>remote_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>forward_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">plist_t&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start forwarding a service port on the companion device to a port on the idevice. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="companion__proxy_8h.html#a7f050e48680635b8c0e7709a7af74189" title="Stop forwarding a service port between companion device and idevice.">companion_proxy_stop_forwarding_service_port</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">remote_port</td><td>remote port </td></tr>
    <tr><td class="paramname">service_name</td><td>The name of the service that shall be forwarded </td></tr>
    <tr><td class="paramname">forward_port</td><td>Pointer that will receive the newly-assigned port accessible via USB/Network on the idevice </td></tr>
    <tr><td class="paramname">options</td><td>PLIST_DICT with additional options. Currently known are IsServiceLowPriority (boolean) and PreferWifi (boolean).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, or a COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="aad6f197ad101505901227e03e838aff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad6f197ad101505901227e03e838aff0">&#9670;&nbsp;</a></span>companion_proxy_start_listening_for_devices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_start_listening_for_devices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">companion_proxy_device_event_cb_t&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts listening for paired devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">callback</td><td>Callback function that will be called when a new device is detected </td></tr>
    <tr><td class="paramname">userdata</td><td>Pointer that that will be passed to the callback function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The event parameter that gets passed to the callback function is freed internally after returning from the callback. The consumer needs to make a copy if required.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, or a COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="a7f050e48680635b8c0e7709a7af74189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f050e48680635b8c0e7709a7af74189">&#9670;&nbsp;</a></span>companion_proxy_stop_forwarding_service_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_stop_forwarding_service_port </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>remote_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop forwarding a service port between companion device and idevice. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="companion__proxy_8h.html#a23e2f13212969bbd6629f02eec25b9fe" title="Start forwarding a service port on the companion device to a port on the idevice.">companion_proxy_start_forwarding_service_port</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client </td></tr>
    <tr><td class="paramname">remote_port</td><td>remote port</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, or a COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
<a id="a4b62ef633b5ca44a7d59d343c90f1cd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b62ef633b5ca44a7d59d343c90f1cd0">&#9670;&nbsp;</a></span>companion_proxy_stop_listening_for_devices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="companion__proxy_8h.html#a6fdf7d074179e00bb1321726cec6916f">companion_proxy_error_t</a> companion_proxy_stop_listening_for_devices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="companion__proxy_8h.html#a43703289c896842c92f7f1c6063a4b34">companion_proxy_client_t</a>&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops listening for paired devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The companion_proxy client</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>COMPANION_PROXY_E_SUCCESS on success, or a COMPANION_PROXY_E_* error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 15 2020 21:05:53 for libimobiledevice by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
