$IncludeConfig diag-common.conf

module(load="../plugins/imkafka/.libs/imkafka")
/* Polls messages from kafka server!*/
input(	type="imkafka" 
	topic="static" 
	broker=["localhost:29092", "localhost:29093", "localhost:29094"] 
#	broker="localhost:29092" 
	consumergroup="default"
	confParam=[ "compression.codec=none",
		"socket.timeout.ms=1000",
		"socket.keepalive.enable=true"]
	)	

template(name="outfmt" type="string" string="%msg:F,58:2%\n")

if ($msg contains "msgnum:") then {
	action( type="omfile" file="rsyslog.out.log" template="outfmt" )
}
