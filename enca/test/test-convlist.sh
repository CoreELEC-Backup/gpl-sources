#! /bin/sh
# Purpose: check whether --list converters and --version are consistent
. $srcdir/setup.sh
rm -f $TESTNAME.expected 2>/dev/null
$ENCA --list converters | grep "^librecode$" >>$TESTNAME.expected
if $ENCA --version | grep " +librecode-interface " >/dev/null; then
  echo librecode >>$TESTNAME.actual
fi
$ENCA --list converters | grep "^iconv$" >>$TESTNAME.expected
if $ENCA --version | grep " +iconv-interface " >/dev/null; then
  echo iconv >>$TESTNAME.actual
fi
$ENCA --list converters | grep "^extern$" >>$TESTNAME.expected
if $ENCA --version | grep " +external-converter " >/dev/null; then
  echo extern >>$TESTNAME.actual
fi
. $srcdir/finish.sh
rm -f $TESTNAME.expected 2>/dev/null
